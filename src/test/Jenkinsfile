

pipeline{
    agent any

    stages{
        stage('Test stage') {
            steps{
                echo 'This is Build stage'
                bat 'mvn clean test -Dwebdriver.type=chrome -Dwebdriver.chrome.driver=C:/Users/lisij/Downloads/jar files/chromedriver_win32.exe'
            }
        }
    }
    post{
        success{
            echo 'Test successed!'
            script {
                //Mail
                // mail(bcc: '',
                //      body: "Run ${JOB_NAME}-#${BUILD_NUMBER} succeeded. To get more details, visit the build results page: ${BUILD_URL}.",
                //      from: 'jenkins-admin@gmail.com',
                //      replyTo: '',
                //      subject: "${JOB_NAME} ${BUILD_NUMBER} succeeded",
                //      to: 'lisijia0324@gmail.com')
                // Cucumber Report
                cucumber fileIncludePattern: '**/jupiterToysAutomation/target/cucumber-report.json', sortingMethod: 'ALPHABETICAL'
                junit testDataPublishers: [[$class: 'AutomateTestDataPublisher']], testResults: 'target/surefire-reports/TEST-*.xml'
            }
        }
        failure {
            echo 'Test failed!'
        }
    }
}